name: Install Requirements
description: 'Install Requirements'
inputs:
  with_cuda:
    description: 'Install CUDA?'
    required: true
    default: '1'
runs:
  using: "composite"
  steps:
    - uses: Silverlan/common_actions/action_start@main
      with:
        name: "pragma > install_requirements"
  
    # For Cycles
    - name: Install Cuda
      uses: Jimver/cuda-toolkit@v0.2.10
      if: ${{ inputs.with_cuda == '1' }}
      with:
        cuda: '11.7.0'
    # TODO: Install OptiX

    - name: Install numpy
      shell: bash
      id: install-numpy
      run: |
        pip install numpy --break-system-packages
  
    - name: Maximize build space
      if: runner.os == 'Linux'
      uses: easimon/maximize-build-space@master
      with:
        root-reserve-mb: 512
        swap-size-mb: 1024
        remove-dotnet: 'true'
        
    - uses: Silverlan/common_actions/action_end@main
